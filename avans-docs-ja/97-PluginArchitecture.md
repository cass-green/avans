# Plugin アーキテクチャ

Avans ではプラグインアーキテクチャを提供しています｡
プラグインアーキテクチャを使用して､コントローラを容易に拡張することができますし､再利用可能なウェブアプリケーションのための部品を提供することができます｡

Amon2/Sledge を知っている人ならば､Amon2/Sledge のプラグインと同じことができるといえば理解が速いでしょう｡

## Plugin でできること

コントローラへのメソッドの提供と､フックポイントへのコードの追加が可能です｡

## Plugin の仕組み

Java 8 で実現された interface の default 実装を利用した Mix-in として実現されています｡

プラグインのインターフェースは Controller を継承することにより､コントローラのメソッドを呼び出すことができます｡

また､Java 8 のインターフェースでは､インスタンス変数を持つことができないので､これが Mix-in 実装時の困難な点となりますが､Controller 側のインスタンスにデータを保存できる機能を提供していますので､Mix-in の実装が非常に容易になっています｡

データ領域をもった Mix-in は WeakHashMap などを利用した実装は可能なようですが､実装が難しいですし､一般のプラグイン実装者の腕に依存しすぎます｡
avans の方式では､普通に実装してれいればとくに問題はありません｡また､データはインスタンスに紐づくので､デバッグも容易です｡

実装ミスで他のコンテキストにリークする心配がありません｡